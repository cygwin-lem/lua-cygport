# cf. https://www.lua.org/bugs.html#5.4.3-5
diff -u -r origsrc/lua-5.4.3/src/lauxlib.c src/lua-5.4.3/src/lauxlib.c
--- origsrc/lua-5.4.3/src/lauxlib.c	2021-03-15 22:32:49.000000000 +0900
+++ src/lua-5.4.3/src/lauxlib.c
@@ -881,6 +881,7 @@
 
 
 LUALIB_API const char *luaL_tolstring (lua_State *L, int idx, size_t *len) {
+  idx = lua_absindex(L,idx);
   if (luaL_callmeta(L, idx, "__tostring")) {  /* metafield? */
     if (!lua_isstring(L, -1))
       luaL_error(L, "'__tostring' must return a string");
